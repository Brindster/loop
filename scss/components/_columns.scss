/**
 * Columns
 */

$columns-gutter: 2rem !default;
$columns-system: 12 !default;
$use-columns-order: true !default;
$use-columns-offset: false !default;
$use-columns-alignment: true !default;
$use-columns-self-alignment: true !default;

$columns-gutter-sizes: (
    'less' : 0,
    'small': 1rem,
    'large': 3rem,
) !default;

.columns {
    display: flex;
    flex: 0 1 auto;
    flex-direction: row;
    flex-wrap: wrap;

    width: calc(100% + #{$columns-gutter});
    transform: translateX(-#{$columns-gutter});

    @if $use-columns-alignment == true {
        // responsive classes
        @each $breakpoint in $breakpoints-from-start {
            @include breakpoint($breakpoint) {
                $prefix: '';
                @if $breakpoint != '' {
                    $prefix: #{'-'}#{$breakpoint};
                }

                // horizontal alignment
                &.#{$prefix}-left   { justify-content: flex-start; }
                &.#{$prefix}-center { justify-content: center; }
                &.#{$prefix}-right  { justify-content: flex-end; }
                &.#{$prefix}-evenly { justify-content: space-evenly; }
                &.#{$prefix}-between{ justify-content: space-between; }

                // vertical alignnt
                &.#{$prefix}-top    { align-items: flex-start; }
                &.#{$prefix}-middle { align-items: center; }
                &.#{$prefix}-bottom { align-items: flex-end; }
            }
        }
    }
}

.column {
    flex-basis: auto;
    max-width: 100%;

    @for $i from 1 through $columns-system {
        &-#{$i} {
            flex-basis: percentage($i/$columns-system);
            max-width: percentage($i/$columns-system);
        }
    }
    &.-shrink { flex-grow: 0}
}

.column,
[class*="column-"] {

    padding-left: $columns-gutter;
    padding-bottom: $columns-gutter;

    flex-shrink: 0;
    flex-grow: 1;

    // responsive classes
    @each $breakpoint, $size in $breakpoints {
        @include breakpoint($breakpoint) {

            // order-0 to make sure it is first
            @if $use-columns-order == true {
                &.-#{$breakpoint}-order-0 { order: -1; }
            }

            @for $i from 1 through $columns-system {
                //sizes
                &.-#{$breakpoint}-#{$i} {
                    flex-basis: percentage($i/$columns-system);
                    max-width: percentage($i/$columns-system);
                }
                // offset
                @if $use-columns-offset == true {
                    &.-#{$breakpoint}-offset-#{$i} { margin-left: percentage($i/$columns-system); }
                }
                // order
                @if $use-columns-order == true {
                    &.-#{$breakpoint}-order-#{$i} { order: $i; }
                }
            }
        }
    }

    @if $use-columns-self-alignment == true {
        // alignments
        @each $breakpoint in $breakpoints-from-start {
            @include breakpoint($breakpoint) {
                $prefix: '';
                @if $breakpoint != '' {
                    $prefix: #{'-'}#{$breakpoint};
                }

                // horizontal alignment
                &.#{$prefix}-left   { margin-left: initial; margin-right: initial; }
                &.#{$prefix}-center { margin-left: auto; margin-right: auto; }
                &.#{$prefix}-right  { margin-left: auto; margin-right: initial; }
                // vertical alignnt
                &.#{$prefix}-top    { align-self: flex-start; }
                &.#{$prefix}-middle { align-self: center; }
                &.#{$prefix}-bottom { align-self: flex-end; }
            }
        }
    }
}

.-gutter {
    @each $gutter-name, $gutter-size in $columns-gutter-sizes {
        &-#{$gutter-name}.columns {
            width: if($gutter-size == 0, 100%, calc(100% + #{$gutter-size}));
            transform: translateX(-#{$gutter-size});

            > .column,
            > [class*="column-"] {
                padding-bottom: $gutter-size;
                padding-left: $gutter-size;
            }
        }
    }
}
.-v-gutter-less.columns {
    > .column,
    > [class*="column-"] {
        padding-bottom: 0;
    }
}
